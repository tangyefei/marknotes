## 浏览器缓存技术实践指南之一：cookie


### 1. 什么是Cookie，它的用途是什么？

Cookies是一些存储在用户电脑上的小文件，它被设计用来保存一些用户数据，每次访问服务器的时候，会自动携带这些数据的信息，服务器可以 用它来查询关联的用户信息，并以此为依据去返回一些定制的内容。比如Cookie中存储了所在地理位置，以后每次进入地图就默认定位到改地点即可。

### 2. 如何获取和查看Cookie?


#### 客户端浏览器可以查看或修改Cookie

多数浏览器能够配置允许用户访问Cookies，但是注意不同的站点之间的Cookie是不能共享的。

打开Chrome的调试窗口可以在Resource的Cookie侧边栏查看，或者在console中输入document.cookie来查看。

#### Web服务器可以查看cookie和往浏览器写入Cookie

详间后面的例子。

### 3. Cookie生成、传递、使用过程是怎么样的？

写Cookie通常在一个页面请求从服务器返回的时候，它属于服务器生成的内容，如下是一个例子：

#### 客户端

你在浏览器地址栏输入了一个站点，请求被发送到服务器，与此同时如果发现和该站点对应的Cookie文件会被一起在请求头中传输给服务器。

#### 服务端

服务器接收到了Cookie的数据后，可以利用这些数据决定返回到前端的内容，通常更进一步是跟将Cookie和Session结合使用，如果没键值对被Web服务器接收到，站点就知道该用户没有访问过，通常会触发浏览器端跳转到登陆页面。

在登陆接口访问服务器并登陆成功以后，通常会为这个客户端的用户新建一个sessionID，并且在返回结果的时候，通过响应头的Set-Cookie把Cookie种在浏览器端。

### 4. 使用Cookie存在的一些问题？

注：该部分的描述已经有些过时

1. 隐私，允许Cookie意味着允许服务器收集用户的信息，现在很多网站会在显著位置告知用户。
2. 安全，公用环境电脑，可能因为没有清除Cookie信息，导致网站信息被泄漏给其他使用者。
3. 清除浏览器缓存等操作可以叉除掉Cookie，要再查看添加到购物车商品几乎不可能。 
4. 多台电脑之间的网站浏览记录（不是浏览器的历史记录）会不一致，比如这台电脑某宝告诉你浏览过某些商品，另一台电脑可能是另外一些商品，因为不同Cookie对应着不同浏览记录。


因为多数网站都使用账号登陆，只要登陆过就能把所有记录跟后台数据库中的账号强关联起来，因此3、4上述问题都不会存在。



