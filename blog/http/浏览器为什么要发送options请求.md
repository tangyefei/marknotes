
## 2. HTTP: 后端每个接口每次调用都会先发送OPTIONS


### a. 问题

项目中前后端在不同的服务器上，调用接口时候每个请求都会先发送OPTIONS，然后再发送正常的请求。调试接口的时候在同名接口中找到有数据交互的时候不免有点麻烦。

### b. 分析

原因是非简单请求触发了 CORS preflight，在方法不变的前提下 OPTIONS 不是可避免，每个请求都会发送，但每次发送可以通过配置 `Access-Control-Max-Age` 来解决。

可以打开正在查看的一个知乎页，发现调用两个请求 /A /B，他们都发送了OPTIONS请求，其中前者的 `access-control-max-age` 为 `3600`，后者没有设置。刷新当前网页，/A 没有再发送 OPTIONS请求，而 /B 仍旧会发送 OPTIONS 请求。

因此让后端接口进行配置即可解决该问题。
