<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>

  <script>
/**
 * @param {string} s
 * @return {number}
 */
// var firstUniqChar = function(s) {
//   // 8.05% 27.50% 
//   // 16:not impl
//   // +13:impl
//   // problems: edge, impl logic complicated and cause wrong handle

//    if(!s || s.length ==0) return -1;
    
//    let o = {}, v =[];
//    for (let i = 0; i < s.length; i++) {
//      if(o[s[i]]==undefined) {
//        v.push(i);
//        o[s[i]] = v.length-1;
//      } else {
//        v.splice(o[s[i]], 1, -1);
//      }
//    }
//    var result = v.find(d => d!=-1);
//    return result==undefined ? -1 : result;
// };


 var firstUniqChar = function(s) {
  // 64.13%  60.00%

   if(!s || s.length ==0) return -1;
    
   const o = {};
    
   for (let i = 0; i < s.length; i++) {
       o[s[i]] = (o[s[i]]||0) + 1;
   }
   
   const keys = Object.keys(o);
   let key;
   for (let i = 0; i < keys.length; i++) {
       if(o[keys[i]] === 1) {
           key = keys[i];;
           break;
       }
   }
   return s.indexOf(key);
};
console.log(firstUniqChar('aabacdcbd')==-1);
console.log(firstUniqChar('leetcode')==0);
console.log(firstUniqChar('loveleetcode')==2);
</script>

</body>
</html>