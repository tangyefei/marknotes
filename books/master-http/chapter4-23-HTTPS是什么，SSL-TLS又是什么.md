# 23 HTTPS是什么，SSL/TLS又是什么

## 为什么要有HTTPS

前述HTTP的三个问题中，无状态、明文、不安全，其中无状态通过加入Cookie后得到解决，而另外两个则必须要引入HTTPS协议。

## 什么是安全

通信过程额中安全的标准具备四个特性：

1. 机密性
2. 完整性
3. 身份认证不可否认

## 什么是HTTPS

HTTPS协议RFC文档很小只有7页，规定了新的协议名为https，默认端口号443，至于之前熟识的概念完全沿用HTTP。

通过浏览器访问实例中的08到21，发现响应报文完全一样（要通过确认才能前往），只有通过Wireshark才会发现多了一些新的数据包。

它之所以能够满足安全的特性，就在于它是 `over SSL/TLS`的。

![HTTP-vs-HTTPS](https://blog-1258030304.cos.ap-guangzhou.myqcloud.com/books/master-http/http-vs-https.jpeg)

## SSL/TLS

SSL即安全套接字（Secure Sockets Layer）在OSI的模型处于第五层（session layer），由网景公司94年发明。

- v1 版本有严重缺陷，从未公开过
- v2
- v3 证明自身是很好的安全协议，99年被改名为TLS（传输层安全 Transport Layer Security)，TLS 1.0等价于SSL v3.1

TLS继续发展，推出来的版本包含如下，它们紧跟密码学发展，持续强化安全和性能，已经策划给你安全领域的权威标准

- 1.1，06年，被认为不安全（同样上面的SSL v3 v2同样被认为不安全），各大浏览器20年左右停止支持
- 1.2，08年，课程的所有讲解都是正对该版本
- 1.3，18年


TLS有记录协议、握手协议、警告协议、变更密码闺房协议、扩展协议等几个字协议组成，综合使用了对称加密、费对称加密、身份认证等许多密码学的前言技术。

![TLS示例截图](https://blog-1258030304.cos.ap-guangzhou.myqcloud.com/books/master-http/TLS-sample.jpeg)

可以访问实验环境[https://www.chrono.com/23-1](https://www.chrono.com/23-1)，看到实验环境使用的是TLS1.2，客户端和服务端支持非常多的密码套件，最后选中了其中一个。

它的组成为 密钥交换算法-签名算法-对称加密算法-摘要算法，它的意思是：

- 握手时使用 ECDHE 算法进行密钥交换
- 用 RSA 签名和身份认证
- 握手后的通信使用 AES 对称算法，密钥长度 256 位
- 分组模式是 GCM
- 摘要算法 SHA384 用于消息认证和产生随机数


## openSSL

它是一个注明的开原密码学程序库和工具包，几乎支持了所有公开的加密码算法和协议，已经能够成为事实上的标准，许多应用都会使用它来实现TLS功能。
