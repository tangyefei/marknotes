# 第2章 JavaScript词法结构

编程语言的词法结构，是指一套描述如何使用这门语言来编写程序的基础性规则。它规定了变量名是什么样的、注释怎么写、程序语句如何分隔等。

## 2.1 字符集


JavaScript程序是用Unicode字符集编写的。

### 空格、换行符 和 格式控制符

JavaScript会忽略程序中标识符之间的空格（包含多个可以表示空格的编码）和换行符（包含多个可以表示换行的编码，其中的回车符+换行符被解读为一个单行结束符）。

Unicode格式控制字符决定了文本的视觉展示，其具体的适用范围在使用时再细查。

### 区分大小写

关键字、变量、函数名和所有的标识符都区分大小写。HTML并不区分，比如在HTML中onclick属性也可以写成onClick，在JavaScript代码中则必须用onclick。

### Unicode转译序列

某些老旧的硬件或者软件不支持无法按输入或显示一些Unicode字符，可以使用 `\uxxxx` 的格式来表示它们。比如 `'café' === 'caf\u00e9'`。

### 标准化

同样一个字符可以使用不同的方法编码，比如即可用 `\u00e9` 表示上述字符，也可以用 `e\0301`表示。它们存储的二进制编码是不一样的。

Unicode定义了一个首选的编码格式 和 标准化的处理方式，JavaScript会认为它正在处理的程序已经是这种格式，不会再对程序中出现的字符做标准化处理。

疑问：如何做到多种编码格式都可以表示同一个字符？

## 2.2 注释

分为  `//` 和 `/* */`  两种写法。

## 2.3 直接量

即在程序中直接的使用的数据值。

## 2.4 标识符和保留字


### 标识符

用于变量和函数命名，必须以字母、下划线或美元符号开始，后续字符可以是 字母、数字、下划线或美元符号。

JavaScript中允许出现Unicode字符全集中的字母和数字，因此可以使用非英语语言 或 使用数学符号来书写标识符。


### 保留字

保留字即一些用来当做自己的关键字的标识符，本节列举了很多保留字。

其中一类叫预定义的全局变量和属性，不同的客户端运行环境这些变量和属性可能不同。


## 2.5 可选的分号


JavaScript使用分号将语句分开，以此增加了代码的可读性。

### 默认加分号规则

语句之间不能少了分隔符，在JavaScript如果语句各自独占一行，通常可以省略分号，程序会在某些情况下自动补充分号，规则是：

> 当前语句和随后的非空格字符不能当做一个整体解析时，就在当前语句的结束处填补分号


```
var a
a 
= 3
console.log(a)
```
会被当做如下代码，因为 `var a a` 无法被解析
```
var a; a = 3; console.log(a);
```

```
var y = x + f
(a+b).toString()
```
会被当做
```
var y = x + f(a+b).toString()
```

### 一种安全措施

在前一行省略分号的代码中，如果后一行代码以 `[({` 开始，极有可能会和上一行一起解析，为了安全一种编程分割是在代码行首加上 `;`。

### 两个例外

关于上述的规则，有两个例外

#### return、break、continue 

如上关键字后面会默认加上分号，而不管能否跟后面的非空格字符组成整体，比如
``` 
return 
true
```

会被当做 `return; true;` 而非 `return true;`

#### ++ --运算符

它们可以作为表达式前缀，也可以作为表达式后缀，作为作为后缀需要在后面加上分号。否则会出现如下情况：

```
x
++
y
```

实际效果是

```
x;++y;
```